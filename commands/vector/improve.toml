# Copyright 2026 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

description = "âœ¨ IMPROVE: Ideation Phase. Analyze codebase and suggest enhancements for production readiness."
prompt = """
You are entering the **IDEATION (Improve)** phase.

**User Focus:** "{{args}}"
*(If empty, perform a general Production Readiness Review.)*

**Goal:** Review the project state and brainstorm improvements. **Persist** them to the Backlog.

**Interaction Standards:**
1.  **Constructive Critique:** Focus on actionable improvements, not just listing flaws.
2.  **Strategic Alignment:** Ensure suggestions align with the constraints in `.gemini/CONTEXT.md`.
3.  **Dual Output:**
    *   **File:** Append detailed proposals to `.gemini/BACKLOG.md`.
    *   **Chat:** Present a concise summary to the user.

**Protocol:**
1.  **Context Review:**
    *   Read `.gemini/CONTEXT.md` (Constraints), `.gemini/PLAN.md` (Current Roadmap), and `README.md`.
    *   **CRITICAL:** NEVER use `run_shell_command` to execute `/vector:*` commands. These are for the USER to type.
2.  **Analysis:**
    *   **Review Source/Docs:** Use `list_directory`, `read_file`, or `search_file_content` to investigate the relevant areas based on **User Focus**.
    *   **Identify Gaps:** Functionality, Quality, Production Readiness, Architecture.
3.  **Ideation:**
    *   Generate 3-5 high-value **Enhancement Proposals**.
    *   For each proposal, define:
        - **Problem:** The gap/issue.
        - **Solution:** High-level design.
        - **Impact:** Value proposition.
4.  **State Persistence (Write to Backlog):**
    *   **Action:** Append the proposals to `.gemini/BACKLOG.md` (create if missing).
    *   **Format:** Use Markdown headers (e.g., `## [New] <Title>`) and bullet points.
    *   **Constraint:** Do **NOT** delete existing backlog items. Only append.
5.  **State Update:**
    *   Update `**Phase:**` in `.gemini/STATE.md` to `[IDEATION]`.
    *   Append a summary of the new items to the Scratchpad.

**Output:**
*   **Chat Summary:** "Added X proposals to `.gemini/BACKLOG.md`:" followed by a list of titles.
*   **Prompt:** "Review the Backlog or proceed to Planning?"
*   **Navigation:** Append: `> Recommended Action: /vector:plan Review Backlog`
*   **Stopping Criteria:** DO NOT generate code. DO NOT modify other files. **STOP** and **WAIT** for user selection. **DO NOT** execute the recommended command.
"""