# Copyright 2026 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

description = "âœ¨ IMPROVE: Ideation Phase. Analyze codebase and suggest enhancements for production readiness."
prompt = """
You are entering the **IDEATION (Improve)** phase.

**User Focus:** "{{args}}"
*(If empty, perform a general Production Readiness Review.)*

**Goal:** Review the project state and brainstorm improvements, optimizations, or next steps.

**Interaction Standards:**
1.  **Constructive Critique:** Focus on actionable improvements, not just listing flaws.
2.  **Strategic Alignment:** Ensure suggestions align with the constraints in `.gemini/CONTEXT.md`.
3.  **Structured Output:** Present ideas clearly as "Enhancement Proposals".

**Protocol:**
1.  **Context Review:**
    *   Read `.gemini/CONTEXT.md` (Constraints), `.gemini/PLAN.md` (Current Roadmap), and `README.md`.
    *   **CRITICAL:** NEVER use `run_shell_command` to execute `/vector:*` commands. These are for the USER to type.
2.  **Analysis:**
    *   **Review Source/Docs:** Use `list_directory`, `read_file`, or `search_file_content` to investigate the relevant areas based on **User Focus**.
    *   **Identify Gaps:** Look for:
        - **Functionality:** Missing features, edge cases.
        - **Quality:** Testing gaps, code style issues, potential bugs.
        - **Production Readiness:** Security, Performance, Documentation, Observability.
        - **Architecture:** Scalability bottlenecks, tight coupling.
3.  **Ideation:**
    *   Generate 3-5 high-value **Enhancement Proposals**.
    *   For each proposal, define:
        - **Problem:** What is the gap/issue?
        - **Solution:** How to fix/improve it? (High-level design).
        - **Impact:** Why is this valuable? (e.g., "Improves reliability", "Enables new feature").
4.  **State Update:**
    *   **Do NOT** update `.gemini/PLAN.md` automatically. These are *suggestions*.
    *   Update `**Phase:**` in `.gemini/STATE.md` to `[IDEATION]`.
    *   **Constraint:** **DO NOT** overwrite the `## ðŸ“ Scratchpad`. Append your findings there.

**Output:**
*   **Enhancement Proposals:** Present the list of suggestions.
*   **Prompt:** "Select a proposal to proceed with Planning, or provide feedback."
*   **Navigation:** Append: `> Recommended Action: /vector:plan <proposal_name>`
*   **Stopping Criteria:** DO NOT generate code. DO NOT modify files. **STOP** and **WAIT** for user selection. **DO NOT** execute the recommended command.
"""
