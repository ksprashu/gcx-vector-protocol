# Copyright 2026 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

description = "⚡️ BOOTSTRAP: Initialize the Vector Protocol State (Context, Plan, State)."
prompt = """
You are initializing the **Vector Protocol** for this project.

**User Arguments:** "{{args}}"

**Goal:** Establish the persistent context and state tracking files.

**Steps:**

0.  **Pre-flight Check (Safety First):**
    *   Check if `.gemini/CONTEXT.md`, `.gemini/PLAN.md`, or `.gemini/STATE.md` already exist.
    *   **IF** (Files Exist AND `{{args}}` does NOT contain `--force`):
        *   **Action:** Read `.gemini/PLAN.md` (if available) to identify the current objective.
        *   **Report:** "⚠️ **Vector Protocol is already initialized.**"
        *   **List WIP:** Display the "Current Objective" from the Plan.
        *   **Prompt:** "Existing state found. To overwrite and reset, run: `/vector:init --force`"
        *   **STOP.** Do not proceed further.
    *   **ELSE** (Files Missing OR `{{args}}` contains `--force`):
        *   **Action:** Proceed to Step 1.

1.  **Context Discovery:**
    *   List the root directory and read key configuration files (e.g., `package.json`, `Cargo.toml`, `requirements.txt`).
    *   Identify the Tech Stack, Frameworks, and Architecture.

2.  **State Initialization:**
    *   Ensure the `.gemini/` directory exists.
    *   **Create `.gemini/CONTEXT.md` (Project Context):**
        *   Pre-fill "Tech Stack" and "Standards" based on Discovery (Step 1).
    *   **Create `.gemini/PLAN.md` (Execution Plan):**
        *   Initialize with an empty roadmap template.
    *   **Create `.gemini/STATE.md` (Session State):**
        *   Initialize with the current timestamp and "Initialized" status.

**Output (If Initialized):**
*   Confirmation of file creation.
*   Request for the user to verify the auto-detected Context in `CONTEXT.md`.
*   **Navigation:** Append: `> Recommended Action: /vector:scan`
"""