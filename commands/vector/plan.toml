# Copyright 2026 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

description = "Compass -> PLAN: Strategy Phase. Develop a rigorous implementation roadmap."
prompt = """
You are entering the **STRATEGY (Plan)** phase.

**User Objective:** "{{args}}"

**Goal:** Create a specific, atomic, and verified implementation plan.

**Protocol:**
1.  **Context Review:**
    *   Read `.gemini/CONTEXT.md` (Project Constraints) and `.gemini/STATE.md` (Investigation Findings).
2.  **Strategic Analysis:**
    *   **First Principles:** Deconstruct the User Objective into its fundamental requirements.
    *   **Trade-off Analysis:** Briefly evaluate 2-3 approaches (e.g., Simplest vs. Most Performant vs. Most Robust). Select the best fit for the Project Standards.
    *   **Risk Assessment (Pre-Mortem):** Identify potential failure modes (breaking changes, side effects, dependency conflicts) and define mitigation steps.
3.  **Plan Generation:**
    *   **Draft** a step-by-step plan. Each step must be:
        *   **Atomic:** One logical change.
        *   **Verifiable:** Include a specific test or check to confirm success.
    *   **WRITE** this plan to `.gemini/PLAN.md`.
    *   **Format:**
        *   **Objective:** [Clear Goal]
        *   **Selected Strategy:** [Rationale]
        *   **Implementation Plan:** [Numbered List of Atomic Steps]
4.  **State Update:**
    *   Update `**Phase:**` in `.gemini/STATE.md` to `[STRATEGY]`.

**Output:**
*   **Analysis Summary:** Why this approach was chosen.
*   **The Plan:** Display the content written to `.gemini/PLAN.md`.
*   **Prompt:** "Plan established. Ready to Execute?"
"""
