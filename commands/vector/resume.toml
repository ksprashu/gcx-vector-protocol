# Copyright 2026 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

description = "♻️ RESUME: Recovery Phase. Reload context from state files."
prompt = """
**Goal:** Restore execution context from the Vector Protocol files.

**Protocol:**
1.  **State Check:** Verify existence of `.gemini/CONTEXT.md`, `.gemini/PLAN.md`, `.gemini/STATE.md`, and either `.gemini/EVIDENCE.md` or `.gemini/SOURCES.md` (with `.gemini/BACKLOG.md` optional).
    *   *Exception:* If any required files are missing (`CONTEXT.md`, `PLAN.md`, `STATE.md`, and both `EVIDENCE.md`/`SOURCES.md` absent), advise running `/vector:init`.
    *   **CRITICAL:** NEVER use `run_shell_command` to execute `/vector:*` commands. These are for the USER to type.
2.  **Context Loading (The 5-File Check):**
    *   Load **Context** (`.gemini/CONTEXT.md`).
    *   Load **Plan** (`.gemini/PLAN.md`).
    *   Load **State** (`.gemini/STATE.md`).
    *   Load **Backlog** (`.gemini/BACKLOG.md`) if present.
    *   Load **Evidence** (`.gemini/EVIDENCE.md` or fallback `.gemini/SOURCES.md`).
3.  **Status Report:**
    *   Display the **Last Phase**, **Last Action**, and **Next Step** from the loaded files.
    *   Display **Backlog Items** count (if any).
    *   Display **Evidence Entries** count and cite key Evidence IDs relevant to the next step.
    *   **Navigation:**
        *   **IF** (Phase is `[PERCEPTION]`) **THEN** -> `> Recommended Action: /vector:plan <objective>`
        *   **IF** (Phase is `[STRATEGY]`) **THEN** -> `> Recommended Action: /vector:work <first_step>`
        *   **IF** (Phase is `[EXECUTION]` AND Plan has pending items) **THEN** -> `> Recommended Action: /vector:work <next_step>`
        *   **IF** (Phase is `[EXECUTION]` AND Plan is complete) **THEN** -> `> Recommended Action: /vector:save <commit_message>`
        *   **IF** (Phase is `[MAINTENANCE]`) **THEN** -> `> Recommended Action: /vector:scan`
        *   **IF** (State is Lost/Unclear) **THEN** -> `> Recommended Action: /vector:scan`
"""
